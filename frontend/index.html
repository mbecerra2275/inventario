<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Control de Inventario</title>

  <!-- Bienvenida del usuario -->
<div id="usuarioInfo" class="text-end me-3 mt-2 text-secondary fw-semibold">
  <span id="nombreUsuario"></span> |
  <span id="rolUsuario"></span>
  <button class="btn btn-outline-danger btn-sm ms-2" onclick="cerrarSesion()">
    <i class="bi bi-box-arrow-right"></i> Cerrar sesi√≥n
  </button>
</div>
</br>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

  <!-- Estilos personalizados -->
  <link rel="stylesheet" href="css/style.css">
</head>
<body class="bg-light">

  <!-- Header fijo superior -->
  <header class="sticky-top shadow-sm">
    <!-- Barra superior verde -->
    <div class="px-3 py-2 bg-success text-white">
      <div class="container">
        <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
          <!-- Logo / T√≠tulo -->
          <a href="#" class="d-flex align-items-center my-2 my-lg-0 me-lg-auto text-white text-decoration-none">
            <i class="bi bi-box-seam fs-2 me-2"></i>
            <span class="fs-4 fw-bold">Sistema de Inventario</span>
          </a>

          <!-- Men√∫ de navegaci√≥n -->
          <ul class="nav col-12 col-lg-auto my-2 justify-content-center my-md-0 text-small">
            <li>
              <a href="#" class="nav-link text-warning">
                <i class="bi bi-house-door-fill d-block mx-auto mb-1 fs-5"></i>
                Inicio
              </a>
            </li>
            <li>
              <a href="#" class="nav-link text-white">
                <i class="bi bi-speedometer2 d-block mx-auto mb-1 fs-5"></i>
                Dashboard
              </a>
            </li>
            <li>
              <a href="#" class="nav-link text-white">
                <i class="bi bi-table d-block mx-auto mb-1 fs-5"></i>
                Reportes
              </a>
            </li>
            <li>
              <a href="productos.html" class="nav-link text-white">
                <i class="bi bi-box2-heart d-block mx-auto mb-1 fs-5"></i>
                Productos
              </a>
            </li>
            <li>
              <a href="#" class="nav-link text-white">
                <i class="bi bi-people-fill d-block mx-auto mb-1 fs-5"></i>
                Usuarios
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Barra inferior con buscador -->
    <div class="px-3 py-2 border-bottom bg-light">
      <div class="container d-flex flex-wrap justify-content-center align-items-center">
        <!-- Buscador -->
        <form class="col-12 col-lg-auto mb-2 mb-lg-0 me-lg-auto">
          <input type="search" class="form-control" placeholder="Buscar producto..." aria-label="Buscar">
        </form>
      </div>
    </div>
  </header>

  <!-- Separador -->
  <div class="b-example-divider"></div>

  <!-- Contenido principal -->
  <div class="container my-4">
    <header class="text-center mb-4">
      <h1 class="fw-bold text-primary">üì¶ Gesti√≥n completa de productos</h1>
    </header>

    <!-- Alertas -->
    <div id="alert" class="alert d-none" role="alert"></div>

    <!-- Estad√≠sticas -->
    <div class="row text-center mb-4">
      <!-- Verde -->
      <div class="col-md-4 mb-3">
        <div class="card shadow-sm border-0">
          <div class="card-body bg-success text-white rounded-3">
            <h3 id="totalProductos" class="fw-bold">0</h3>
            <p class="mb-0">Total Productos</p>
          </div>
        </div>
      </div>

      <!-- Azul -->
      <div class="col-md-4 mb-3">
        <div class="card shadow-sm border-0">
          <div class="card-body bg-primary text-white rounded-3">
            <h3 id="totalStock" class="fw-bold">0</h3>
            <p class="mb-0">Unidades en Stock</p>
          </div>
        </div>
      </div>

      <!-- Naranjo -->
      <div class="col-md-4 mb-3">
        <div class="card shadow-sm border-0">
          <div class="card-body text-white rounded-3" style="background-color: #fd7e14;">
            <h3 id="valorInventario" class="fw-bold">$0</h3>
            <p class="mb-0">Valor Total (CLP)</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Formulario de Producto -->
    <section class="card shadow-sm mb-4">
      <div class="card-header bg-success text-white">
        <h2 id="formTitle" class="h5 mb-0">‚ûï Agregar Nuevo Producto</h2>
      </div>
      <div class="card-body">
        <form id="productoForm" class="row g-3">
          <input type="hidden" id="productoId">

          <!-- Nombre -->
          <div class="col-md-6">
            <label for="nombre" class="form-label">Nombre del Producto *</label>
            <input type="text" id="nombre" class="form-control" required placeholder="Ej: Laptop HP Pavilion">
          </div>

          <!-- C√≥digo SKU -->
          <div class="col-md-6">
            <label for="codigo_sku" class="form-label">C√≥digo SKU/C√≥digo de Barra</label>
            <input type="text" id="codigo_sku" class="form-control" placeholder="Ej: SKU-001">
          </div>

          <!-- Marca -->
          <div class="col-md-4">
            <label for="marca" class="form-label">Marca</label>
            <input type="text" id="marca" class="form-control" placeholder="Ej: HP, Samsung, Sony">
          </div>

          <!-- Clasificaci√≥n -->
          <div class="col-md-4">
            <label for="clasificacion" class="form-label">Clasificaci√≥n</label>
            <select id="clasificacion" class="form-select">
              <option value="">Seleccionar...</option>
              <option value="Electr√≥nica">Electr√≥nica</option>
              <option value="Ropa">Ropa</option>
              <option value="Alimentos">Alimentos</option>
              <option value="Muebles">Muebles</option>
              <option value="Herramientas">Herramientas</option>
              <option value="Oficina">Oficina</option>
              <option value="Otros">Otros</option>
            </select>
          </div>

          <!-- Tipo de Producto -->
          <div class="col-md-4">
            <label for="tipo_producto" class="form-label">Tipo de Producto</label>
            <select id="tipo_producto" class="form-select">
              <option value="">Seleccionar...</option>
              <option value="Producto Terminado">Producto Terminado</option>
              <option value="Materia Prima">Materia Prima</option>
              <option value="Insumo">Insumo</option>
              <option value="Servicio">Servicio</option>
            </select>
          </div>

          <!-- Sucursal -->
         <div class="col-md-4">
             <label for="sucursal" class="form-label">Sucursal</label>
             <select id="sucursal" class="form-select">
              <option value="">Seleccionar...</option>
            </select>
         </div>

          <!-- Estado -->
          <div class="col-md-4">
            <label for="estado" class="form-label">Estado *</label>
            <select id="estado" class="form-select" required>
              <option value="Activo">Activo</option>
              <option value="Inactivo">Inactivo</option>
              <option value="Descontinuado">Descontinuado</option>
            </select>
          </div>

          <!-- Precio -->
          <div class="col-md-4">
            <label for="precio" class="form-label">Precio (CLP) *</label>
            <input type="number" id="precio" class="form-control" step="1" required placeholder="0">
          </div>

          <!-- Cantidad -->
          <div class="col-md-4">
            <label for="cantidad" class="form-label">Cantidad en Stock *</label>
            <input type="number" id="cantidad" class="form-control" required placeholder="0">
          </div>

          <!-- Impuestos -->
          <div class="col-md-4">
            <label for="impuestos" class="form-label">Impuestos (%) *</label>
            <input type="number" id="impuestos" class="form-control" step="0.1" value="19" required placeholder="19">
          </div>

          <!-- Botones -->
          <div class="col-12 text-center mt-3">
            <button type="submit" class="btn btn-success me-2" id="btnSubmit">
              <i class="bi bi-save me-1"></i> Guardar Producto
            </button>
            <button type="button" class="btn btn-warning d-none" id="btnCancelar" onclick="cancelarEdicion()">
              <i class="bi bi-x-circle me-1"></i> Cancelar
            </button>
          </div>
        </form>
      </div>
    </section>

    <!-- B√∫squeda -->
    <div class="mb-4">
      <input type="text" id="buscar" class="form-control" placeholder="üîç Buscar producto..." onkeyup="buscarProducto()">
    </div>

    <!-- Tabla de Productos -->
    <div class="table-responsive">
      <table class="table table-striped table-hover align-middle">
        <thead class="table-success">
          <tr>
            <th>ID</th>
            <th>SKU</th>
            <th>Producto</th>
            <th>Marca</th>
            <th>Clasificaci√≥n</th>
            <th>Tipo</th>
            <th>Estado</th>
            <th>Precio (CLP)</th>
            <th>Stock</th>
            <th>IVA %</th>
            <th>Subtotal</th>
            <th>Fecha Creaci√≥n</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody id="tablaProductos">
          <tr>
            <td colspan="13" class="text-center text-muted">Cargando productos...</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- JS de la aplicaci√≥n -->
  <script src="js/app.js" defer></script>
</body>
</html>
